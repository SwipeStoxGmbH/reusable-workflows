
name: envsubst
description: This is an action to go thtough all YAML files in repos base folder, and change variables
runs:
  using: 'composite'
  steps:
    - run: |
        FILES=($PATH/*)
        for FILE in $FILES; do
          if [[ -n $PATTERNS ]] ; then
            envsubst "${PATTERNS}" < $FILE > /tmp/envsubst || exit 1
          else
            envsubst < $FILE > /tmp/envsubst || exit 1
          fi
          mv /tmp/envsubst $FILE || exit 1
        done
      shell: bash